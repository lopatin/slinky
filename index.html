<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Slinky : Compiling static file + proxy server for rich client apps" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Slinky</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mwylde/slinky">View on GitHub</a>

          <h1 id="project_title">Slinky</h1>
          <h2 id="project_tagline">Compiling static file + proxy server for rich client apps</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mwylde/slinky/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mwylde/slinky/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Slinky</h1>

<p>If you write single-page rich client apps, Slinky is here to
make your life easier. For development, it provides a static file
server that transparently handles compiled languages like CoffeeScript
and SASS while supporting advanced features like dependency management,
proxying and automatic browser reloads. And once you're ready to
deploy, Slinky will compile, concatenate, and minify your sources,
leaving you ready to push to production.</p>

<h4>What can slinky do for you?</h4>

<h5>Slinky Server</h5>

<ul>
<li>Transparently compiles sources for a variety of languages</li>
<li>Supports the <a href="http://livereload.com">LiveReload</a> protocol, for
instant browser updates</li>
<li>Includes a customizable proxy, so your dev environment can mirror production</li>
<li>Includes support for HTML5 <a href="https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history">pushState</a> based apps</li>
</ul><h5>Slinky Builder</h5>

<ul>
<li>Keeps track of the proper include order of your scripts and styles</li>
<li>Compiles, minifies and concatenates JavaScript and CSS</li>
</ul><p>Slinky is not a framework, and it does not want to control your source
code. Its goal is to help you when you want itâ€”and get out of the way
when you don't. It endeavors to be sufficiently flexible to support a
wide variety of development styles.</p>

<h2>Quick start</h2>

<pre><code>$ gem install slinky
$ cd ~/my/awesome/project/src
$ slinky start
[hardcore web development action]
$ slinky build -o ../pub
$ scp -r ../pub/ myserver.com:/var/www/project
</code></pre>

<h2>The details</h2>

<ol>
<li><a href="#transparent-compilation">Transparent compilation</a></li>
<li><a href="#livereloadguard-support">LiveReload/Guard support</a></li>
<li><a href="#script--style-management">Script &amp; style management</a></li>
<li><a href="#specifying-order">Specifying order</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#pushstate">PushState</a></li>
<li><a href="#proxies">Proxies</a></li>
<li><a href="#ignores">Ignores</a></li>
</ol><h3>Transparent compilation</h3>

<p>The Slinky server will transparently compile various front-end languages
for you, providing a smooth transition from development to production.
What does this mean? When Slinky sees a request for a file that doesn't
exist (say, "/scripts/core.js") it will look for a file that can be compiled
into that ("/scripts/core.coffee"), compile it, then return the result. This
allows you to write code without concern for which files are "native"
and which need compilation.</p>

<p>Currently supported languages include:</p>

<ul>
<li>CoffeeScript</li>
<li>HAML</li>
<li>SASS/SCSS</li>
<li>LESS</li>
<li>ClojureScript (experimental)</li>
</ul><p>Adding support for new languages is simple, and pull requests are welcome.</p>

<h3>LiveReload/Guard support</h3>

<p>The typical edit-save-reload cycle of web development can be tedious,
especially when trying to get your CSS <em>just</em> right. What if you could
reduce that to just edit-save? <a href="http://livereload.com/">LiveReload</a>
allows just that. Slinky includes built-in support for LiveReload
service. All you need to do is run a browser extension (available
<a href="http://go.livereload.com/extensions">here</a> for Safari, Chrome and
Firefox) or include a little script (<a href="http://go.livereload.com/mobile">http://go.livereload.com/mobile</a>).
In addition to reloading your app whenever a source file changes,
LiveReload supports hot reloading of CSS, letting you tweak your
styles with ease. If don't want the LiveReload server running,
disabling it is a simple <code>--no-livereload</code> away.</p>

<h3>Script &amp; style management</h3>

<p>Slinky can manage all of your javascript and css files if you want it
to, serving them up individually during development and concatenating
and minifying them for production. To support this, Slinky recognizes
<code>slinky_scripts</code> in your HTML/HAML files. For example, when Slinky
sees this:</p>

<div class="highlight"><pre><span class="nn">!!!5</span>
<span class="nt">%html</span>
  <span class="nt">%head</span>
    slinky_scripts
    slinky_styles
  <span class="nt">%body</span>
    <span class="nt">%h1</span> Hello, world!
</pre></div>

<p>it will compile the HAML to HTML and replace slinky_styles with the
appropriate HTML. You can also disable minification with the
<code>--dont-minify</code> option or the <code>dont_minify: true</code> configuration
option.</p>

<h3>Specifying order</h3>

<p>Often scripts and styles depend on being included in the page
in a particular order. For this, we need the <code>slinky_require</code>
directive.</p>

<p>For example, consider the case of two coffeescript files, A.coffee and
B.coffee. A includes a class definition that B depends upon, so we
want to make sure that A comes before B in the concatenation order.</p>

<p>File A.coffee:</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nx">A</span>
  <span class="nv">hello: </span><span class="nf">(thing) -&gt;</span> <span class="s">"Hello, "</span> <span class="o">+</span> <span class="nx">thing</span>
</pre></div>

<p>File B.coffee:</p>

<div class="highlight"><pre><span class="nx">slinky_require</span><span class="p">(</span><span class="s">"A.coffee"</span><span class="p">)</span>
<span class="nx">alert</span> <span class="p">(</span><span class="k">new</span> <span class="nx">A</span><span class="p">).</span><span class="nx">hello</span><span class="p">(</span><span class="s">"world"</span><span class="p">)</span>
</pre></div>

<p>We can also do this in CSS/SASS/SC SS:</p>

<div class="highlight"><pre><span class="cm">/* slinky_require("reset.css")</span>
<span class="nt">a</span>
  <span class="na">color</span><span class="o">:</span> <span class="nb">red</span>
</pre></div>

<h3>Dependencies</h3>

<p>As HAML and SASS scripts can include external content as part of their
build process, you may want certain files to be recompiled whenever
other files change. For example, you may use mustache templates
defined each in their own file, but have set up your HAML file to
include them all into the HTML. Thus when one of the mustache files
changes, you would like the HAML file to be recompiled so that the
templates will also be updated.</p>

<p>These relationships are specified as "dependencies," and like requirements
they are incdicated through a special <code>slinky_depends("file")</code> directive in 
your source files. For our template example, the index.haml files might look 
like this:</p>

<div class="highlight"><pre>slinky_depends("scripts/templates/*.mustache")
<span class="nn">!!!5</span>

<span class="nt">%html</span>
  <span class="nt">%head</span>
    <span class="nt">%title</span> My App
    slinky_styles
    slinky_scripts
    <span class="p">-</span> <span class="no">Dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"./scripts/templates/*.mustache"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
      <span class="p">-</span> <span class="nb">name</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
      <span class="nt">%script</span><span class="p">{</span><span class="ss">:id</span> <span class="o">=&gt;</span> <span class="nb">name</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s2">"text/x-handlebars-template"</span><span class="p">}=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="nt">%body</span>
</pre></div>

<h2>Configuration</h2>

<p>Slinky can optionally be configured using a yaml file. By default, it
looks for a file called <code>slinky.yaml</code> in the source directory, but you
can also supply a file name on the command line using <code>-c</code>.</p>

<p>Most of what can be specified on the command line is also available in
the configuration file. Here's a fully-decked out config:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">pushstate</span><span class="p-Indicator">:</span>
  <span class="s">"/app1"</span><span class="p-Indicator">:</span> <span class="s">"/index.html"</span>
  <span class="s">"/app2"</span><span class="p-Indicator">:</span> <span class="s">"/index2.html"</span>
<span class="l-Scalar-Plain">proxy</span><span class="p-Indicator">:</span>
  <span class="s">"/test1"</span><span class="p-Indicator">:</span> <span class="s">"http://127.0.0.1:8000"</span>
  <span class="s">"/test2"</span><span class="p-Indicator">:</span> <span class="s">"http://127.0.0.1:7000"</span>
<span class="l-Scalar-Plain">ignore</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">script/vendor</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">script/jquery.js</span>
<span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5555</span>
<span class="l-Scalar-Plain">src_dir</span><span class="p-Indicator">:</span> <span class="s">"src/"</span>
<span class="l-Scalar-Plain">build_dir</span><span class="p-Indicator">:</span> <span class="s">"build/"</span>
<span class="l-Scalar-Plain">no_proxy</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
<span class="l-Scalar-Plain">no_livereload</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
<span class="l-Scalar-Plain">livereload_port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5556</span>
<span class="l-Scalar-Plain">dont_minify</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>

<p>Most are self explanatory, but a few of the options merit further
attention:</p>

<h3>PushState</h3>

<p><a href="https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history">PushState</a>
is a new Javascript API that gives web apps more control over the
browser's history, making possible single-page javascript applications
that retain the advantages of their multi-page peers without resorting
to hacks like hash urls. The essential idea is this: when a user
navigates to a conceptually different "page" in the app, the URL
should be updated to reflect that so that behaviors such as
deep-linking and history navigation work properly. </p>

<p>For this to work, however, the server must be able to return the
content of your main HTML page for arbitrary paths, as otherwise when
a user tries to reload a pushstate-enabled web app they would receive
a 404. Slinky supports multiple pushState paths using the pushstate
configuration option:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">pushstate</span><span class="p-Indicator">:</span>
  <span class="s">"/"</span><span class="p-Indicator">:</span>     <span class="s">"/index.html"</span>
  <span class="s">"/app1"</span><span class="p-Indicator">:</span> <span class="s">"/app1/index.haml"</span>
  <span class="s">"/app2"</span><span class="p-Indicator">:</span> <span class="s">"/app2.haml"</span>
</pre></div>

<p>Here, the key of the hash is a URL prefix, while the value is the file
that should actually be displayed for non-existent requests that begin
with the key. In the case of conflicting rules, the more specific one
wins. For this config, instead of returning a 404 for a path like
<code>/this/file/does/not/exist</code>, Slinky will send the content of
<code>/index.html</code>, leaving your JavaScript free to render the proper view for
that content. Similarly, a request for <code>/app1/photo/1/edit</code>, assuming
such file does not exist, will return <code>/app1/index.haml</code>.</p>

<h3>Proxies</h3>

<p>Slinky has a built-in proxy server which lets you test ajax requests
with your actual backend servers without violating the same-origin
policy. To set it up, your slinky.yaml file will look something like
this:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">proxy</span><span class="p-Indicator">:</span>
  <span class="s">"/login"</span><span class="p-Indicator">:</span> <span class="s">"http://127.0.0.1:4567/login"</span>
  <span class="s">"/search"</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">to</span><span class="p-Indicator">:</span> <span class="s">"http://127.0.0.1:4567/search"</span>
    <span class="l-Scalar-Plain">lag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2000</span>
</pre></div>

<p>What does this mean? We introduce the list of proxy rules using the
<code>proxy</code> key. Each rule is a key value pair. The key is a url prefix to
match against. The first rule is equivalent to the regular expression
<code>/\/login.*/</code>, and will match paths like <code>/login/user</code> and
<code>/login/path/to/file.html</code>. The value is either a url to pass the
request on to or a hash containing configuration (one of which must be
a <code>to</code> field). Currently a <code>lag</code> field is also supported. This delays
the request by the specified number of milliseconds in order to
simulate the latency associated with remote servers.</p>

<p>An example: we have some javascript code which makes an AJAX GET
request to <code>/search/widgets?q=foo</code>. When Slinky gets the request it
will see that it has a matching proxy rule, rewrites the request
appropriately (changing paths and hosts) and sends it on to the backend
server (in this case, 127.0.0.1:4567). Once it gets a response it will
wait until 2 seconds has elapsed since slinky itself received the
request and finally returns the response back to the browser.</p>

<h3>Ignores</h3>

<p>By default slinky will include every javascript and css file it finds
into the combined scripts.js and styles.css files. However, it may be
that for some reason you want to keep some files separate and handle
them manually. The ignore directive lets you do that, by telling the
system to skip over any files or directories listed. For example:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">ignore</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">script/vendor</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">css/reset.css</span>
</pre></div>

<p>This will causes everything in the script/vendor directory to be
ignored by slinky, as well as the reset.css file.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Slinky maintained by <a href="https://github.com/mwylde">mwylde</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-78795-10");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
